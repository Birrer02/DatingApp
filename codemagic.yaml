workflows:
  android-release:
    name: Android Release Build
    max_build_duration: 120
    environment:
      flutter: stable
      groups:
        - google_credentials # Sicherstellen, dass diese Gruppe existiert
      vars:
        PACKAGE_NAME: "com.example.myapp" # Ersetze mit deinem Paketnamen
    android_signing:
      keystore_path: $CM_KEYSTORE_PATH
      keystore_password: $CM_KEYSTORE_PASSWORD
      key_alias: $CM_KEY_ALIAS
      key_password: $CM_KEY_PASSWORD
    scripts:
      - echo "ðŸ“¦ Running Flutter Clean"
      - flutter clean
      - echo "ðŸ“¦ Running Flutter Pub Get"
      - flutter pub get
      - echo "ðŸš€ Building Release APK"
      - flutter build apk --release
      - echo "ðŸš€ Building Release AAB"
      - flutter build appbundle --release
    artifacts:
      - build/*/outputs//.apk
      - build/*/outputs//.aab
    publishing:
      google_play:
        credentials: $GCLOUD_SERVICE_ACCOUNT_CREDENTIALS
        track: internal
